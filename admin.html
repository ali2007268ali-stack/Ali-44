<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„ - Ù…ØªØ¬Ø±ÙŠ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>ğŸ§‘â€ğŸ’¼ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø³Ø¤ÙˆÙ„</h1>
    <button onclick="logout()">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </header>

  <!-- Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ -->
  <section class="admin-section">
    <h2>â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
    <input type="text" id="prodName" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬">
    <input type="number" id="prodPrice" placeholder="Ø§Ù„Ø³Ø¹Ø±">
    <input type="file" id="prodImage" accept="image/*">
    <button onclick="addProduct()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬</button>
  </section>

  <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
  <section class="admin-section">
    <h2>ğŸ§¾ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
    <div id="admin-products"></div>
  </section>

  <!-- Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
  <section class="admin-section">
    <h2>ğŸ“¦ Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø§Ù„ÙˆØ§Ø±Ø¯Ø©</h2>
    <div id="orders"></div>
  </section>

  <script>
    // Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©
    function displayProducts() {
      const products = JSON.parse(localStorage.getItem("products")) || [];
      const div = document.getElementById("admin-products");
      div.innerHTML = "";

      if (products.length === 0) {
        div.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";
        return;
      }

      products.forEach((p, i) => {
        const prod = document.createElement("div");
        prod.className = "product";
        prod.innerHTML = `
          <img src="${p.image}" alt="${p.name}">
          <h3>${p.name}</h3>
          <p>${p.price} Ø¬Ù†ÙŠÙ‡</p>
          <button onclick="deleteProduct(${i})">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬</button>
        `;
        div.appendChild(prod);
      });
    }

    // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯
    function addProduct() {
      const name = document.getElementById("prodName").value.trim();
      const price = parseFloat(document.getElementById("prodPrice").value);
      const imageInput = document.getElementById("prodImage");

      if (!name || !price || !imageInput.files[0]) {
        alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø§Ù…Ù„Ø£ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        const newProduct = { name, price, image: e.target.result };
        let products = JSON.parse(localStorage.getItem("products")) || [];
        products.push(newProduct);
        localStorage.setItem("products", JSON.stringify(products));

        alert("âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­");
        displayProducts();
        imageInput.value = "";
        document.getElementById("prodName").value = "";
        document.getElementById("prodPrice").value = "";
      };
      reader.readAsDataURL(imageInput.files[0]);
    }

    // Ø­Ø°Ù Ù…Ù†ØªØ¬
    function deleteProduct(index) {
      let products = JSON.parse(localStorage.getItem("products")) || [];
      products.splice(index, 1);
      localStorage.setItem("products", JSON.stringify(products));
      displayProducts();
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
    function displayOrders() {
      const orders = JSON.parse(localStorage.getItem("orders")) || [];
      const div = document.getElementById("orders");
      div.innerHTML = "";

      if (orders.length === 0) {
        div.innerHTML = "<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹.</p>";
        return;
      }

      orders.forEach((order, i) => {
        const ord = document.createElement("div");
        ord.className = "order";
        let itemsList = "";
        order.items.forEach(item => {
          itemsList += `<li>${item.name} - ${item.price} Ø¬Ù†ÙŠÙ‡</li>`;
        });

        ord.innerHTML = `
          <h3>ğŸ‘¤ ${order.userName}</h3>
          <p><strong>Ø§Ù„Ø¹Ù†ÙˆØ§Ù†:</strong> ${order.address}</p>
          <p><strong>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:</strong> ${order.phone}</p>
          <p><strong>Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª:</strong> ${order.notes}</p>
          <p><strong>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</strong> ${order.total} Ø¬Ù†ÙŠÙ‡</p>
          <p><strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong> ${order.location || "Ù„Ù… ÙŠØ­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹Ø§Ù‹"}</p>
          <ul>${itemsList}</ul>
          <button onclick="confirmOrder(${i})">âœ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…</button>
          <button onclick="deleteOrder(${i})">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨</button>
        `;
        div.appendChild(ord);
      });
    }

    // ØªØ£ÙƒÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø·Ù„Ø¨
    function confirmOrder(index) {
      let orders = JSON.parse(localStorage.getItem("orders")) || [];
      alert(`âœ… ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ ${orders[index].userName}`);
      orders.splice(index, 1);
      localStorage.setItem("orders", JSON.stringify(orders));
      displayOrders();
    }

    // Ø­Ø°Ù Ø§Ù„Ø·Ù„Ø¨
    function deleteOrder(index) {
      let orders = JSON.parse(localStorage.getItem("orders")) || [];
      orders.splice(index, 1);
      localStorage.setItem("orders", JSON.stringify(orders));
      displayOrders();
    }

    function logout() {
      window.location.href = "index.html";
    }

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
    displayProducts();
    displayOrders();
  </script>
</body>
</html>
<!DOCTYPE html>